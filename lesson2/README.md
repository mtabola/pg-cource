# Лекция 2: ACID, MVCC, буферный кэш
## Ответы на вопросы
1. Открыть консоль и зайти по ssh на ВМ в ЯО/любое другое подключение
2. Открыть вторую консоль и также зайти по ssh на ту же ВМ в ЯО
3. Запустить везде psql из под пользователя postgres к одному кластеру ПГ
  <img width="958" alt="изображение" src="https://github.com/user-attachments/assets/9f3f39ae-92f3-4070-bd62-2cd9c0092668" />
  
  В данном случае использую docker контейнер, который развернут на хостовой ОС
  
4. Cделать в первой сессии новую таблицу и наполнить ее данными
   <img width="791" alt="изображение" src="https://github.com/user-attachments/assets/c1d0a8e7-1044-48c2-a1c2-db0c1e2212f4" />

5. Посмотреть текущий уровень изоляции:
   <img width="389" alt="изображение" src="https://github.com/user-attachments/assets/d4d36bac-66bd-4f9d-983a-3d84cad0bdd9" />

6. Начать новую транзакцию в обоех сессиях с дефолтным (не меняя) уровнем изоляции
7. В первой сессии добавить новую запись
8. Сделать запрос на выбор всех записей во второй сессии
9. Видите ли вы новую запись и если да то почему? После задания можете сверить
   <img width="613" alt="изображение" src="https://github.com/user-attachments/assets/9bcad146-61f3-43ac-a275-7ea0ff252092" />
   В данном режиме изоляции во второй сессии не видно свежих данных, так как `read commited` не допускает грязного чтения
   
10. Завершить транзакцию в первом окне
11. Сделать запрос на выбор всех записей второй сессии
12. Видите ли вы новую запись и если да то почему?
    <img width="606" alt="изображение" src="https://github.com/user-attachments/assets/e47d9b7f-429f-40f6-9678-92717bbf99ae" />
    Теперь запись видно, так как мы совершили коммит в первой версии (завершили транзакцию). И на этом уравне возможно неповторяемое чтение
13. Завершите транзакцию во второй сессии

14. Начать новые транзакции, но уже на уровне repeatable read в ОБЕИХ сессиях
    <img width="464" alt="изображение" src="https://github.com/user-attachments/assets/61a4e90c-34b9-4bad-b0fa-e5b3932646fb" />

15. В первой сессии добавить новую запись
16. Сделать запрос на выбор всех записей во второй сессии
17. Видите ли вы новую запись и если да то почему?
    <img width="610" alt="изображение" src="https://github.com/user-attachments/assets/90b2a019-f3ba-4f46-92c4-4cff4f670894" />
    Аналогично, как в `read commited` - грязное чтение не допускается, поэтому и не видно
    
18. Завершить транзакцию в первом окне
19. Сделать запрос во выбор всех записей второй сессии
20. Видите ли вы новую запись и если да то почему?
    <img width="539" alt="изображение" src="https://github.com/user-attachments/assets/b0716e74-4f3b-4cab-95aa-a20b275faf01" />
    Нет, так как в `repeatable read` не позволяет делать неповторяемое чтение

Задание окончено

